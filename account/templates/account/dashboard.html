{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
    <h1>Dashboard</h1>
    {% with total_images_created=request.user.images_created.count %}
    <p>Welcome to your dashboard. You have bookmarked {{ total_images_created }}
        image{{ total_images_created|pluralize }}.
    </p>
    {% endwith %}
    <p>
        Drag the following button to your bookmarks toolbar to bookmark images 
        from other websites -> <a href="javascript:{% include 'bookmarklet_launcher.js' %}" class="button">
            Bookmark it
        </a>
    </p>
    <p>
        You can also <a href="{% url 'account:edit' %}">edit your profile</a>
        or <a href="{% url 'account:password_change' %}">change your password</a>.
    </p>

    <h2>What's happening</h2>
        <div id="action-list">
            {% if actions %}
            <div id="action-list">
                {% for action in actions %}
                    {% include "actions/action/detail.html" %}
                {% endfor %}
            </div>
            
            <!-- Pagination -->
            {% if is_paginated %}
                <div class="pagination">
                    <span class="pagination-links">
                        {% if page_obj.has_previous %}
                            <a href="?page=1">&laquo; first</a>
                            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                        {% endif %}
                        
                        <span class="current-page">
                            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                        </span>
                        
                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}">next</a>
                            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                        {% endif %}
                    </span>
                </div>
            {% endif %}
        {% else %}
            <p>No activity yet. Start following people or bookmark some images!</p>
    {% endif %}
    </div>
{% endblock %}